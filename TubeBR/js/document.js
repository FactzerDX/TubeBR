(()=>{"use strict";var e={156:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.YT_DOMAINS=void 0,t.YT_DOMAINS=["m.youtube.com","www.youtube.com","www.youtube-nocookie.com","music.youtube.com","www.youtubekids.com"]},740:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function r(e){try{d(i.next(e))}catch(e){a(e)}}function s(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;const o=n(841),a=n(584),r=n(156),s=n(59),d=n(544),l=n(779);let u,c="";const v=(0,s.getThumbnailElements)(),m=["/youtubei/v1/search","/youtubei/v1/guide","/youtubei/v1/browse","/youtubei/v1/next","/youtubei/v1/player"],w=["videoDetails","videoPrimaryInfoRenderer","videoSecondaryInfoRenderer","currentVideoEndpoint"],f=e=>{window.postMessage(Object.assign({source:"sponsorblock"},e),"/")};function b(e){const t=u;u=e.detail,g(),t||(e.detail.addEventListener("onAdStart",(()=>f({type:"ad",playing:!0}))),e.detail.addEventListener("onAdFinish",(()=>f({type:"ad",playing:!1}))))}function p(e){const t=e.detail.pageType;if(t){const n={type:"navigation",pageType:t,videoID:null};if("shorts"===t||"watch"===t){const i=e.detail.endpoint;if(!i)return null;n.videoID=("shorts"===t?i.reelWatchEndpoint:i.watchEndpoint).videoId}return n}return null}function h(e){const t=p(e);t&&f(t)}function y(e){var t,n,i,o,a;g();const r=null===(a=null===(o=null===(i=null!==(n=null===(t=e.detail)||void 0===t?void 0:t.data)&&void 0!==n?n:e.detail)||void 0===i?void 0:i.response)||void 0===o?void 0:o.playerResponse)||void 0===a?void 0:a.videoDetails;if(r)f(Object.assign({channelID:r.channelId,channelTitle:r.author},p(e)));else{const t=p(e);t&&f(t)}}function g(){if(!u)return;const e=u.getVideoData();e&&e.video_id!==c&&(c=e.video_id,f({type:"data",videoID:e.video_id,isLive:e.isLive,isPremiere:e.isPremiere}))}function S(e){f({type:"videoIDsLoaded",videoIDs:Array.from(E(e))})}function E(e){const t=new Set;for(const n in e)"videoId"===n?t.add(e[n]):"object"!=typeof e[n]||w.includes(n)||E(e[n]).forEach((e=>t.add(e)));return t}function I(e){var t,n,i,o;(null===(t=e.data)||void 0===t?void 0:t.source)&&("dearrow-media-session"===(null===(n=e.data)||void 0===n?void 0:n.source)?(0,l.setMediaSessionInfo)(e.data.data):"dearrow-reset-media-session-thumbnail"===(null===(i=e.data)||void 0===i?void 0:i.source)?(0,l.resetMediaSessionThumbnail)():"sb-reset-media-session-link"===(null===(o=e.data)||void 0===o?void 0:o.source)&&(0,l.resetLastArtworkSrc)())}const T={browserFetch:null,customElementDefine:null,waitingInterval:null};function M(){document.removeEventListener("yt-player-updated",b),document.removeEventListener("yt-navigate-start",h),document.removeEventListener("yt-navigate-finish",y),(0,d.onMobile)()&&window.removeEventListener("state-navigateend",y),T.browserFetch&&(window.fetch=T.browserFetch),T.customElementDefine&&(window.customElements.define=T.customElementDefine),T.waitingInterval&&clearInterval(T.waitingInterval),window.removeEventListener("message",I),window.teardownCB=null}t.init=function(){var e,t,n;const s="true"===(null===(t=null===(e=document.querySelector("#sponsorblock-document-script"))||void 0===e?void 0:e.getAttribute)||void 0===t?void 0:t.call(e,"teardown")),l=window.versionCB&&(!window.versionCB||(0,o.versionHigher)(a.version,window.versionCB));if(s||l)null===(n=window.teardownCB)||void 0===n||n.call(window);else if(window.versionCB&&!(0,o.versionHigher)(a.version,window.versionCB))return;window.versionCB=a.version,window.teardownCB=M;const u=document.createElement("div");if(u.id="sponsorblock-document-script",u.setAttribute("version",a.version),(document.head||document.documentElement).appendChild(u),document.addEventListener("yt-player-updated",b),document.addEventListener("yt-navigate-start",h),document.addEventListener("yt-navigate-finish",y),(0,d.onMobile)()&&window.addEventListener("state-navigateend",y),r.YT_DOMAINS.includes(window.location.host)&&!(0,d.onMobile)()){const e=-1!==window.customElements.define.toString().indexOf("[native code]"),t=window.customElements.define.bind(window.customElements);T.customElementDefine=t,window.customElements.define=(n,i,o)=>{let a=i;if(v.includes(n))if(e){class e extends i{constructor(){super(),f({type:"newElement",name:n})}}a=e}else a=function(){i.call(this),f({type:"newElement",name:n})},Object.setPrototypeOf(a.prototype,i.prototype),Object.setPrototypeOf(a,i);t(n,a,o)}}const c=window.fetch;if(T.browserFetch=c,window.fetch=(e,t)=>e instanceof Request&&m.some((t=>e.url.includes(t)))?(e.url.includes("/youtubei/v1/next")&&(setTimeout((()=>f({type:"newElement",name:""})),1e3),setTimeout((()=>f({type:"newElement",name:""})),2500),setTimeout((()=>f({type:"newElement",name:""})),8e3)),new Promise(((n,o)=>i(this,void 0,void 0,(function*(){try{const i=yield c(e,t),o=yield i.json();n(new Response(JSON.stringify(o),i)),S(o)}catch(e){o(e)}}))))):c(e,t),window.addEventListener("message",I),"undefined"!=typeof ytInitialData)S(ytInitialData);else{const e=setInterval((()=>{"undefined"!=typeof ytInitialData&&(S(ytInitialData),clearInterval(e))}),1);T.waitingInterval=e}setTimeout((()=>{setInterval.toString().includes("console.log(SCRIPTID, 'original interval:', interval, location.href)")&&alert('Warning: You hae the user script "YouTube CPU Tamer". This causes performance issues with SponsorBlock, and does not actually improve CPU performance. Please uninstall this user script.')}),1e3)}},779:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetLastArtworkSrc=t.resetMediaSessionThumbnail=t.setMediaSessionInfo=void 0;let n=null,i=null,o=null;function a(e){var t,a,d;"mediaSession"in navigator&&(o||(o={}),o=Object.assign(Object.assign({},o),e),(null===(d=null===(a=null===(t=navigator.mediaSession.metadata)||void 0===t?void 0:t.artwork)||void 0===a?void 0:a[0])||void 0===d?void 0:d.src)&&!navigator.mediaSession.metadata.artwork[0].src.includes("dearrow-thumb")&&(n=navigator.mediaSession.metadata.artwork[0].src),s(navigator.mediaSession.metadata,o)&&(r(o),i&&clearTimeout(i),i=setTimeout((()=>{o&&s(navigator.mediaSession.metadata,o)&&r(o),i=null}),500)))}function r(e){var t,n,i,o,a,r,s,d;if("mediaSession"in navigator){const l=Object.assign({},function(){var e,t,n,i,o,a,r,s,d,l;const u=Object.assign(Object.assign({},navigator.mediaSession.metadata),{artwork:[...null!==(t=null===(e=navigator.mediaSession.metadata)||void 0===e?void 0:e.artwork)&&void 0!==t?t:[]]});return void 0===u.title?{title:null!==(i=null===(n=navigator.mediaSession.metadata)||void 0===n?void 0:n.title)&&void 0!==i?i:"",artist:null!==(a=null===(o=navigator.mediaSession.metadata)||void 0===o?void 0:o.artist)&&void 0!==a?a:"",album:null!==(s=null===(r=navigator.mediaSession.metadata)||void 0===r?void 0:r.album)&&void 0!==s?s:"",artwork:[...null!==(l=null===(d=navigator.mediaSession.metadata)||void 0===d?void 0:d.artwork)&&void 0!==l?l:[]]}:u}());for(const t in e)l[t]=e[t];(null===(n=null===(t=l.artwork)||void 0===t?void 0:t[0])||void 0===n?void 0:n.src)&&(null===(o=null===(i=l.artwork)||void 0===i?void 0:i[0])||void 0===o?void 0:o.src)!==(null===(s=null===(r=null===(a=navigator.mediaSession.metadata)||void 0===a?void 0:a.artwork)||void 0===r?void 0:r[0])||void 0===s?void 0:s.src)&&((null===(d=l.title)||void 0===d?void 0:d.endsWith(" "))?l.title=l.title.trim():l.title=l.title+" "),navigator.mediaSession.metadata=new MediaMetadata(l)}}function s(e,t){if(e&&t)for(const n of Object.keys(t)){if("object"==typeof t[n]&&s(e[n],t[n]))return!0;if(e[n]!==t[n])return!0}return!1}t.setMediaSessionInfo=a,t.resetMediaSessionThumbnail=function(){var e,t,i;n&&a({title:null===(i=null!==(e=null==o?void 0:o.title)&&void 0!==e?e:null===(t=navigator.mediaSession.metadata)||void 0===t?void 0:t.title)||void 0===i?void 0:i.trim(),artwork:[{src:n}]})},t.resetLastArtworkSrc=function(){n=null}},544:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.onMobile=void 0,t.onMobile=function(){return"m.youtube.com"===window.location.hostname}},59:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getThumbnailSelectors=t.getThumbnailBoxSelectors=t.getThumbnailLink=t.getThumbnailImageSelectors=t.getThumbnailElements=void 0;const i=n(544);function o(){return(0,i.onMobile)()?[".media-item-thumbnail-container",".video-thumbnail-container-compact","ytm-thumbnail-cover",".video-thumbnail-container-vertical","ytm-hero-playlist-thumbnail-renderer"]:["ytd-thumbnail","ytd-playlist-thumbnail"]}function a(e=""){return o().map((t=>`${t}${e}`)).join(", ")}t.getThumbnailElements=o,t.getThumbnailImageSelectors=function(){return(0,i.onMobile)()?"img.video-thumbnail-img, img.amsterdam-playlist-thumbnail":"ytd-thumbnail:not([hidden]) img, ytd-playlist-thumbnail yt-image:not(.blurred-image) img"},t.getThumbnailLink=function(e){return(0,i.onMobile)()?e.querySelector(["a.media-item-thumbnail-container","ytm-channel-featured-video-renderer a","a.compact-media-item-image","a.reel-item-endpoint",".amsterdam-playlist-thumbnail-wrapper a"].join(", ")):e.querySelector(a(" a"))},t.getThumbnailBoxSelectors=function(){return(0,i.onMobile)()?".media-item-thumbnail-container":a(":not([hidden])")},t.getThumbnailSelectors=a},841:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.versionHigher=void 0,t.versionHigher=function(e,t){const n=e.split("."),i=t.split(".");if(n.length!==i.length)return!0;for(let e=0;e<n.length;e++){const t=parseInt(n[e]),o=parseInt(i[e]);if(t>o)return!0;if(t<o)return!1}return!1}},584:e=>{e.exports={version:"1.1.39"}}},t={};(0,function n(i){var o=t[i];if(void 0!==o)return o.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}(740).init)()})();